const { ethers } = require("hardhat");

async function main() {
  const data = "0x2682935e000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000691be6580000000000000000000000000000000000000000000000000000000067c417bc0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071afd498d0000000000000000000000000000c27d297bb085bf5022a4a63b9b2076c4f5a66396000000000000000000000000000000000000000000000000000000000000001347656e6572616c20496e666f726d6174696f6e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000001347656e6572616c20496e666f726d6174696f6e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
  
  const selector = data.slice(0, 10);
  console.log("Selector:", selector);
  
  const iface = new ethers.Interface([
    "function createRaffle(string _title, string _description, uint256 _startTime, uint256 _endTime, uint256 _maxParticipants, bool _isPublic, string _inviteCode, uint8 _tokenType, address _tokenAddress, uint256 _ticketPrice, address _payoutAddress)"
  ]);
  
  try {
    const decoded = iface.parseTransaction({ data });
    console.log("Function:", decoded.name);
    console.log("Args:", decoded.args);
    
    const startTime = decoded.args[2];
    const endTime = decoded.args[3];
    console.log("Start Time:", startTime.toString(), new Date(Number(startTime) * 1000).toISOString());
    console.log("End Time:  ", endTime.toString(), new Date(Number(endTime) * 1000).toISOString());
    
    if (startTime >= endTime) {
        console.log("âŒ Error: Start Time >= End Time");
    }

  } catch (e) {
    console.log("Could not decode with createRaffle signature", e);
  }
}

main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
